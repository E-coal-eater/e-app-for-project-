// Toggle acquisition via POST
function toggleAcquisition() {
    fetch("/toggle_acquisition", { method: "POST" })
        .catch(err => console.log("Toggle error:", err));
}

// Live status updater
function refreshStatus() {
    fetch("/acquisition_status")
        .then(res => res.json())
        .then(data => {
            const statusText = document.getElementById("statusText");
            const button = document.getElementById("toggleButton");

            if (data.running) {
                statusText.innerHTML = '<span style="color:green;">RUNNING</span>';
                button.innerText = "Stop Acquisition";
            } else {
                statusText.innerHTML = '<span style="color:red;">STOPPED</span>';
                button.innerText = "Start Acquisition";
            }
        });
}

// first load
refreshStatus();

// refresh every 500ms
setInterval(refreshStatus, 500);